<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <title>Dashboard Master | Agenda SISREG</title>

  <!-- CSS -->
  <link rel="stylesheet" href="css/theme.css">
  <link rel="stylesheet" href="css/style.css">

  <!-- Libs -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>

<body>

<!-- ================= HEADER ================= -->
<header class="dash-header">
  <div class="container unit-info">
    <h1>ðŸ“Š Dashboard Geral â€“ Gestor</h1>
    <p>VisÃ£o consolidada de todas as unidades</p>

    <div class="actions-bar">
      <button id="btnSincronizar" class="btn-main btn-sync">ðŸ”„ Sincronizar</button>
      <button id="btnExportarPDF" class="btn-main">ðŸ“„ Exportar PDF</button>
      <button id="btnLogout" class="btn-main btn-logout">ðŸšª Sair</button>
    </div>
  </div>
</header>

<!-- ================= FILTROS ================= -->
<section class="filter-section">
  
  <!-- FILTRO DE UNIDADE (MASTER) -->
  <div>
    <label for="filtroUnidade">Unidade</label>
    <select id="filtroUnidade">
      <option value="ALL">Todas as unidades</option>
    </select>
  </div>

  <!-- FILTRO DE MÃŠS -->
  <div>
    <label for="filtroMes">MÃªs</label>
    <select id="filtroMes">
      <option value="todos">Todos</option>
      <option value="01">Jan</option>
      <option value="02">Fev</option>
      <option value="03">Mar</option>
      <option value="04">Abr</option>
      <option value="05">Mai</option>
      <option value="06">Jun</option>
      <option value="07">Jul</option>
      <option value="08">Ago</option>
      <option value="09">Set</option>
      <option value="10">Out</option>
      <option value="11">Nov</option>
      <option value="12">Dez</option>
    </select>
  </div>

</section>

<!-- ================= KPIs ================= -->
<section class="kpi-container">
  <div class="kpi-card">
    <h3>Total de Vagas</h3>
    <p id="kpiVagas">0</p>
  </div>

  <div class="kpi-card">
    <h3>% Retorno</h3>
    <p id="kpiRetorno">0%</p>
  </div>

  <div class="kpi-card">
    <h3>Profissionais</h3>
    <p id="kpiProfissionais">0</p>
  </div>

  <div class="kpi-card">
    <h3>Procedimentos</h3>
    <p id="kpiProcedimentos">0</p>
  </div>
</section>

<!-- ================= DASHBOARD ================= -->
<main id="dashboardArea" class="container">

  <div class="dashboard-grid">

    <!-- GRÃFICO 1 -->
    <div class="card">
      <h3>Taxa de RenovaÃ§Ã£o</h3>
      <div style="position:relative;height:280px;">
        <canvas id="gaugeChart"></canvas>
        <div id="percText" style="
          position:absolute;
          top:50%;
          left:50%;
          transform:translate(-50%,-10%);
          font-size:2rem;
          font-weight:900;">
          0%
        </div>
      </div>
    </div>

    <!-- GRÃFICO 2 -->
    <div class="card">
      <h3>ComposiÃ§Ã£o da Escala</h3>
      <canvas id="donutChart"></canvas>
      <p id="totalVagas" style="text-align:center;font-weight:700;"></p>
    </div>

    <!-- GRÃFICO 3 -->
    <div class="card full-width">
      <h3>EvoluÃ§Ã£o Mensal da Oferta</h3>
      <canvas id="evolutionChart"></canvas>
    </div>

    <!-- GRÃFICO 4 -->
    <div class="card">
      <h3>Oferta por Especialidade</h3>
      <div id="chartProcedimentos" style="height:360px;"></div>
    </div>

    <!-- GRÃFICO 5 -->
    <div class="card">
      <h3>Oferta por Profissional</h3>
      <div id="chartProfissionais" style="height:360px;"></div>
    </div>

    <!-- INSIGHTS -->
    <div class="card full-width">
      <h3>Insights AutomÃ¡ticos</h3>
      <ul id="listaInsights"></ul>
    </div>

  </div>

</main>

<!-- ================= FOOTER ================= -->
<footer class="app-footer">
  <p id="footerCreditos"></p>
</footer>

<!-- ================= TOOLTIP D3 ================= -->
<div id="vizTooltip" style="
  position:absolute;
  display:none;
  background:rgba(0,0,0,0.85);
  color:#fff;
  padding:10px 14px;
  border-radius:8px;
  font-size:14px;
  pointer-events:none;
  z-index:9999;
"></div>

<!-- ================= SCRIPTS ================= -->
<script src="js/config.js"></script>
<script src="js/utils.js"></script>
<script src="js/dashboard.js"></script>

</body>
</html>

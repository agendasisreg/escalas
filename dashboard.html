<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Dashboard | Agenda SISREG</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/theme.css">
<link rel="stylesheet" href="css/style.css">
<!-- Bibliotecas externas -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
<style>
/* Estilos adicionais para espaÃ§amento */
.dashboard-grid {
  margin-top: 30px; /* EspaÃ§amento entre KPIs e grÃ¡ficos */
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
  gap: 24px;
}

.card.full-width {
  grid-column: 1 / -1;
}

/* BotÃ£o toggle dentro do card Insights */
#cardInsights .card-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 10px;
}

#cardInsights .card-head h3 {
  margin: 0;
}

/* Tabela oculta por padrÃ£o */
#secTabela {
  display: none;
}

/* [CORREÃ‡ÃƒO] Posicionamento dos botÃµes na margem direita */
.header-btns {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
  justify-content: flex-end;
}
</style>
</head>
<body>
<!-- HEADER -->
<header class="dash-header">
  <!-- Elementos decorativos -->
  <div class="header-decorative circle-1"></div>
  <div class="header-decorative circle-2"></div>
  <div class="header-decorative circle-3"></div>
  
  <div style="display:flex;justify-content:space-between;align-items:center;position:relative;z-index:2;">
  <div class="unit-info">
  <h1 id="txtUnidade">Carregando unidade...</h1>
  <p>Painel Gerencial de Escalas â€¢ <strong>SISREG Amazonas</strong></p>
  </div>
  <div class="header-btns">
  <button id="btnSincronizar" class="btn-main btn-sync">ğŸ”„ Sincronizar</button>
  <button id="btnExportarPDF" class="btn-main">ğŸ“„ Exportar PDF</button>
  <a href="escalas.html" style="text-decoration:none;">
  <button class="btn-main btn-new">â• Nova Escala</button>
  </a>
  <button id="btnLogout" class="btn-main btn-logout">Sair</button>
  </div>
  </div>
</header>

<!-- FILTRO -->
<section class="filter-section">
<label for="filtroMes">Filtrar por MÃªs de VigÃªncia:</label>
<select id="filtroMes">
<option value="todos">Mostrar Todos</option>
<option value="01">Janeiro</option><option value="02">Fevereiro</option><option value="03">MarÃ§o</option>
<option value="04">Abril</option><option value="05">Maio</option><option value="06">Junho</option>
<option value="07">Julho</option><option value="08">Agosto</option><option value="09">Setembro</option>
<option value="10">Outubro</option><option value="11">Novembro</option><option value="12">Dezembro</option>
</select>
</section>

<!-- ÃREA DO DASHBOARD (usada no PDF) -->
<main class="container" id="dashboardArea">
<!-- KPIs - AGORA COM 4 CARDS -->
<section class="kpi-container">
<div class="kpi-card">
<h3>Total de Vagas</h3>
<p id="kpiVagas">0</p>
</div>
<div class="kpi-card">
<h3>% Vagas Retorno</h3>
<p id="kpiRetorno">0%</p>
</div>
<div class="kpi-card">
<h3>Profissionais</h3>
<p id="kpiProfissionais">0</p>
</div>
<div class="kpi-card">
<h3>Procs. Ãšnicos</h3>
<p id="kpiProcedimentos">0</p>
</div>
</section>

<!-- GRID DE GRÃFICOS - TÃTULOS ATUALIZADOS -->
<section class="dashboard-grid">
<div class="card">
<h3>ğŸ”¥ Oferta por Dia e HorÃ¡rio</h3>
<canvas id="chartHeatmap"></canvas>
</div>
<div class="card">
<h3>ğŸ¯ Oferta por HorÃ¡rio</h3>
<canvas id="chartHorario"></canvas>
</div>
<div class="card">
<h3>ğŸ§¬ Principais Procedimentos</h3>
<canvas id="chartProcedimentos"></canvas>
</div>
<div class="card">
<h3>ğŸ† Ranking de Profissionais</h3>
<canvas id="chartRanking"></canvas>
</div>
<div class="card">
<h3>ğŸ”„ 1Âª Vez vs Retorno</h3>
<canvas id="chartComparacao"></canvas>
</div>
<div class="card">
<h3>ğŸ“ˆ EvoluÃ§Ã£o da Oferta</h3>
<canvas id="chartEvolucao"></canvas>
</div>
<div class="card full-width" id="cardInsights">
<h3>ğŸ§  Insights AutomÃ¡ticos</h3>
<ul id="listaInsights"></ul>
</div>
<!-- (Opcional) se seu JS da Fase 3 usar KPI de mÃ©dia -->
<span id="kpiMedia" style="display:none;"></span>
</section>

<!-- TABELA (OCULTA) -->
<section id="secTabela" class="card full-width" style="margin-top:20px;">
<h3>ğŸ“‹ Tabela Detalhada</h3>
<div style="overflow:auto;">
<table id="tabEscalas">
<thead>
<tr>
<th>CPF</th>
<th>Profissional</th>
<th>CÃ³d. Proc.</th>
<th>Procedimento</th>
<th>Exames</th>
<th>Dias</th>
<th>InÃ­cio</th>
<th>Fim</th>
<th>Vagas</th>
<th>Vig. InÃ­cio</th>
<th>Vig. Fim</th>
</tr>
</thead>
<tbody id="corpoTabela"></tbody>
</table>
</div>
</section>
</main>

<!-- FOOTER -->
<footer id="footerCreditos"></footer>

<!-- Scripts - ORDEM CRÃTICA -->
<script src="js/config.js"></script>
<script src="js/dashboard.js"></script>
</body>
</html>
